# Http Status

http method를 이용할때 받은 response에서 201,200 등의 숫자들을 확인했었다.

이게 무슨 의미일까?

---

## Http Status

클라이언트가 보낸 요청의 처리 상태를 응답에서 알려주는 기능이다. 

클라이언트의 입장을 고려해서 정해놓은 규약에 따라 답해준다.

---

## 1xx (100번대)
- 요청이 수신되어 처리중
- 거의 사용되지 않는다.

---

## 2xx (Successful) - 클라이언트의 요청을 성공적으로 처리

#### 200 Ok

![스크린샷 2023-08-07 오후 9 12 45](https://github.com/YongNyeo/TIL/assets/109174778/a243a8df-a875-4f47-9bf2-8233e2450f71)

- 주로 GET과 POST에서 나타난다.
- 요청을 성공했다는 의미이며 캐싱이 가능하다.


#### 201 Created

![스크린샷 2023-08-07 오후 9 17 53](https://github.com/YongNyeo/TIL/assets/109174778/39816541-c9b0-45fd-a0ac-ebd37c45d0a4)

- 요청 성공해서 새로운 리소스가 생성됨
- 일반적으로 POST,PUT에서 나타난다.

#### 202 Accepted 

- 요청이 접수되었으나 처리가 완료되지 않음
- 배치 처리 같은곳에 사용

#### 204 No Content

- 서버가 요청을 성공적으로 수행했으나, 응답 데이터가 없음

ex)웹 문서 편집시 save 버튼을 눌러도 아무 내용이 없는 상황

---
## 3xx (Redirection) - 요청을 완료하기 위해 유저 에이전트의 추가 조치 필요

![스크린샷 2023-08-07 오후 9 27 10](https://github.com/YongNyeo/TIL/assets/109174778/3f54328b-c3ea-4a42-b688-749a62ee2419)

리다이렉션의 흐름을 잠깐 보면, /event URL에서 대체된 /new-event URL로 자동으로 보내는 것이다.

웹 브라우저는 3xx 응답 결과에 Location 헤더가 있으면, Location 위치로 자동 이동한다.

### Redirection의 종류

- 영구 다이렉션 : 특정 리소스의 URI가 영구적으로 이동

- 일시 다이렉션 : 리소스의 URI가 일시적인 변경 (PRG)

- 특수 다이렉션 : 결과 대신 캐시를 이용

--- 
## 💡영구 리다이렉션 : 301 ,308

- 리소스의 URI가 영구적으로 이동 (Location 헤더 이용)
- 원래의 URL를 사용X, 검색 엔진 등에서도 변경 인지

### 301 Moved Permanently
- 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수 있음(MAY)

![스크린샷 2023-08-07 오후 9 38 50](https://github.com/YongNyeo/TIL/assets/109174778/cab8bbd0-bd63-464b-bee4-3fb6fd0b85a0)

### 308 Permanent Redirect
![스크린샷 2023-08-07 오후 9 38 59](https://github.com/YongNyeo/TIL/assets/109174778/0f15a8f1-9eef-4bf8-b523-85810c7491b6)

- 301과 기능은 같음
- 리다이렉트시 요청 메서드와 본문 유지(처음 POST를 보내면 리다이렉트도 POST 유지)

---

## 💡일시적인 리다이렉션 : 302, 307, 303

- 리소스의 URI가 일시적으로 변경(때때로 요청된 리소스가 표준 위치에서 접근할 수 없고 다른 위치에서 접근 가능한 경우가 있음)
- 따라서 검색 엔진 등에서 URL을 변경하면 안됨(=기존 페이지 링크를 버리지 않음)
- 예시) 로그인 하지 않은 사용자가 로그인해야 접근가능한 페이지에 접속 시도할때

### 302 Found (301과 같다)
- 리다이렉트시 요청 메서드가 GET으로 변하고, 본문이 제거될 수도 있음(아닐수도 있음)
 
### 303 See Other
- 302와 기능은 같음
- 리다이렉트시 요청 메서드가 GET으로 변경

### 307 Temporary Redirect
- 302와 기능은 같음
- 리다이렉트시 요청 메서드와 본문 유지(요청 메서드를 변경하면 안된다. MUST NOT)

---

## PRG : Post/Redirect/Get

Post 요청후 웹브라우저를 새로고침하게되면  마지막 요청이 Post로 남아있기 때문에 Post 요청을 중복해서 보내게된다.

![스크린샷 2023-08-08 오전 1 06 02](https://github.com/YongNyeo/TIL/assets/109174778/cd78aef4-6820-47ab-8f19-7d8b9bfe97ae)

- 해결방법

Post를 보낸후 Redirect를 Get으로 받게되면, 새로고침 했을때 마지막요청이 Get이기 때문에

중복된 Post요청이 아닌 Get요청(결과화면)이 계속해서 나오게된다.


--- 

### 정리

일시적인 리다이렉션과 영구적인 리다이렉션의 상황별 사용 차이는 이해했다.

그렇다면 일시적인 리다이렉션에는 기능들이 상당히 비슷해보이는데 무엇을 사용해야하지?

> 처음 302 스펙의 의도는 HTTP메서드를 그대로 유지하는것이었다.
> 
> 하지만 웹브라우저들이 대부분 GET으로 바꿔버림. 그래서 모호한 302를 대신 명확한 307과 303이 등장했다.
> 
> 307과 303을 권장하지만 많은 애플리케이션이 302를 기본값으로 사용
>
> 자동 리다이렉션시 GET으로 변하는것이 상관없다면 302를 사용하는것 권장한다.


--- 

## 304 (캐시)리다이렉트

- 클라이언트에게 리소스가 수정되지 않았음을 알려준다.
- 클라이언트는 어쩔수 없이 로컬PC에 저장된 캐시를 재사용하게된다. (캐시로 리다이렉트 한다)
- 304 응답은 응답에 메시지 바디를 포함하면 안된다. (로컬 캐시를 사용해야 하므로)

--- 

## 4xx (클라이언트 오류)

보통 클라이언트의 문법등으로 서버가 요청을 수행할 수 없는 상황이다. 똑같이 재시도해도 계속 실패한다.(반면 500대 오류는 재시도했을때 성공 가능성 있음)


### 400 -  Bad Request

- 요청 구문, 메시지 등 오류
- 클라이언트는 요청 내용을 다시 수정하여 보내야함
- ex) 요청 파라미터가 잘못되거나 api스펙이 맞지 않을때

### 401 - Unauthorized

- 클라이언트가 해당 리소스에 대한 인증이 필요함
- 인증 : 본인이 누구인지 확인

### 403 - Forbidden

- 서버가 요청을 이해했지만 접근권한 불충분


### 404 - NotFound

- 요청 리소스가 서버에 없음.
- 또는 클라이언트가 권한이 부족한 리소스에 접근할때 리소스를 숨기고 싶을 때

---

## 5xx (Server Error) 

- 서버 문제로 발생
- 서버문제이기에 재시도할때 성공할 수 있다.

### 500 - Interner Server Error
- 서버 내부 문제로 발생
- 애매하면 500 오류

### 503 - Service Unavailable

- 서버가 일시적인 과부하 또는 예정된 작업으로 잠시 요청을 처리할 수 없음


---

📘 Reference

- https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard
